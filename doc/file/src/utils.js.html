<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/utils.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/thegroundwork/groundwork.js.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Auth.js~Auth.html">Auth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Dictionary.js~Dictionary.html">Dictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Donation.js~Donation.html">Donation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Event.js~Event.html">Event</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventCategory.js~EventCategory.html">EventCategory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventInvitation.js~EventInvitation.html">EventInvitation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventMessage.js~EventMessage.html">EventMessage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventTicket.js~EventTicket.html">EventTicket</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Groundwork.js~Groundwork.html">Groundwork</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Http.js~Http.html">Http</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Payment.js~Payment.html">Payment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Profile.js~Profile.html">Profile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Quickcard.js~Quickcard.html">Quickcard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/SchemaUtils.js~SchemaUtils.html">SchemaUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Subscription.js~Subscription.html">Subscription</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Supporter.js~Supporter.html">Supporter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deprecate">deprecate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-epoch">epoch</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-has">has</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isApiVersion">isApiVersion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmpty">isEmpty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-max">max</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mixin">mixin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-normalizeUrl">normalizeUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-only">only</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-urlJoin">urlJoin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validEmail">validEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_CATEGORY">ENDPOINT_CATEGORY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_EVENT">ENDPOINT_EVENT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_HOST_UNSUBSCRIBE">ENDPOINT_HOST_UNSUBSCRIBE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_INVITATION">ENDPOINT_INVITATION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_MESSAGE">ENDPOINT_MESSAGE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_TICKET">ENDPOINT_TICKET</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NAMESPACE">NAMESPACE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-API_URL">API_URL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-API_VERSION">API_VERSION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_ACCESS_TOKEN">AUTH_ACCESS_TOKEN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_GWID">AUTH_GWID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_TOKEN_TYPE">AUTH_TOKEN_TYPE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CONFIG_AUTH">CONFIG_AUTH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DEFAULT_API_URL">DEFAULT_API_URL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FACEBOOK_APP_ID">FACEBOOK_APP_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-OAUTH_CLIENT_ID">OAUTH_CLIENT_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RE_API_VERSION">RE_API_VERSION</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/utils.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*global __LOG__ */
import * as constants from &apos;./constants&apos;;

/**
 * Utility Functions
 */

// For speed
const hasOwnProperty = Object.prototype.hasOwnProperty;

/**
 * Normalize URL strings (handle slashes, query params, etc)
 * @param {String} [str=&apos;&apos;] - url string to normalize
 * @return {String}
 */
function normalizeUrl(str = &apos;&apos;) {
  return str
    .replace(/[\/]+/g, &apos;/&apos;)
    .replace(/\/\?/g, &apos;?&apos;)
    .replace(/\/\#/g, &apos;#&apos;)
    .replace(/\:\//g, &apos;://&apos;);
}

/**
 * Checks if `path` is a direct property. (Courtesy of lodash)
 *
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @returns {boolean} Returns `true` if `path` is a direct property, else `false`.
 * @example
 *
 * const object = { &apos;a&apos;: { &apos;b&apos;: { &apos;c&apos;: 3 } } };
 *
 * _.has(object, &apos;a&apos;);
 * // =&gt; true
 *
 * _.has(object, &apos;a.b.c&apos;);
 * // =&gt; true
 *
 * _.has(object, [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]);
 * // =&gt; true
 *
 */
function has(object, path) {
  return object != null &amp;&amp; hasOwnProperty.call(object, path); // eslint-disable-line
}

/**
 * Join an array of strings into a URL
 * @param {...url&lt;string&gt;} url - fragments
 * @return {String}
 */
function urlJoin(...url) {
  const joined = [].slice.call(url, 0).join(&apos;/&apos;);
  return normalizeUrl(joined);
}

/**
 * Check to see if an Object is Empty
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isEmpty(obj) {
  // null and undefined are &quot;empty&quot;
  if (obj == null) return true; // eslint-disable-line

  // Assume if it has a length property with a non-zero value
  // that that property is correct.
  if (obj.length &gt; 0) return false;
  if (obj.length === 0) return true;

  // Otherwise, does it have any properties of its own?
  // Note that this doesn&apos;t handle
  // toString and valueOf enumeration bugs in IE &lt; 9
  for (const key in obj) {
    if (hasOwnProperty.call(obj, key)) return false;
  }

  return true;
}

/**
 * Attempt to validate an email address with a variant on RFC5322
 * @link http://tools.ietf.org/html/rfc5322#section-3.4
 * @param {String} str
 * @return {Boolean}
 */
function validEmail(str) {
  const re = new RegExp(/[a-z0-9!#$%&amp;&apos;*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;&apos;*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/); // eslint-disable-line
  return re.test(str);
}

/**
 * Return an object with only the whitelisted properties
 * @param {Array&lt;string&gt;} whitelist - names of properties to keep
 * @param {Object} obj - object to filter
 * @return {Object} - filtered object
 */
function only(whitelist = [], obj = {}) {
  return whitelist.reduce((ret, p) =&gt; {
    if (has(obj, p)) { ret[p] = obj[p]; } // eslint-disable-line
    return ret;
  }, {});
}

/**
 * Return the current DateTime in Epoch w/o milliseconds
 *
 * @example
 * epoch(); // =&gt; 1440705061 instead of 1440705061191
 * epoch(2015, 10, 13) // =&gt; 1447390800
 *
 * @param {...time&lt;number&gt;} time - year, month, day for a specific epoch
 * @return {Number}
 */
function epoch(...time) {
  const [year, month, day] = time;
  const d = (time.length &gt; 0) ? new Date(year, month, day) : new Date();
  return Math.floor(d.getTime() / 1000);
}

/**
 * Prevent a number from passing a threshold. NaNs are converted to 0
 *
 * @param {Number} num
 * @param {Number} [maximum] - defaults to 50
 * @return {Number}
 */
function max(num, maximum = 50) {
  const [n, m] = [Number(num), Number(maximum)];
  let r = (n &gt; m) ? m : n;
  if (isNaN(n)) { r = 0; }
  return r;
}

/**
 * Log a deprecation warning in console only in DEV mode
 *
 * @example
 * const opts = {bar: 1};
 * deprecate(opts.bar, &apos;opts.bar is deprecated!&apos;) // &apos;opts.bar is deprecated&apos;
 *
 * const foo = 1;
 * deprecate((typeof foo === String), &apos;String support is deprecated, given %s&apos;, foo)
 * // &apos;String support is deprecated, given 1&apos;
 *
 * @param {Boolean} pred - predicate or value should be &quot;truthy&quot; or &quot;falsey&quot;
 * @param {String} format - warning message template
 * @param {...args&lt;any&gt;} args - values to substitue into format
 * @return {void}
 */
function deprecate(pred, format, ...args) {
  if (__LOG__ &amp;&amp; pred) {
    if (format === undefined) {
      throw new Error(&apos;deprecate requires an error message&apos;);
    }

    let warning;
    if (args.length) {
      warning = args.reduce((prev, next) =&gt; prev.replace(/%s/g, next), format);
    } else {
      warning = format;
    }

    console.warn(warning); // eslint-disable-line
  }
}

/**
 * Mixin properties from a source Class (or sources) into a target Class
 *
 * @example
 * class Foo {}
 * class Bar { hiBar() { return &apos;Hi from bar!&apos;} }
 * class Baz { hiBaz() { return &apos;Hi from baz!&apos;} }
 *
 * mixin(Foo, Bar, Baz);
 *
 * const foo = new Foo();
 * foo.hiBar() // =&gt; &apos;Hi from bar!&apos;
 * foo.hiBaz() // =&gt; &apos;Hi from baz!&apos;
 *
 * @param  {Class} target - target to merge properties into
 * @param  {...sources&lt;Class&gt;} sources - sources to merge properties from
 * @return {void}
 */
function mixin(target, ...sources) {
  const tp = target.prototype;

  sources.forEach((source) =&gt; {
    const sp = source.prototype;

    Object.getOwnPropertyNames(sp).forEach((name) =&gt; {
      if (name !== &apos;constructor&apos;) {
        Object.defineProperty(tp, name, Object.getOwnPropertyDescriptor(sp, name));
      }
    });
  });
}

/**
 * Predicate that checks the value of a string against the API Version format
 *
 * @param {String} version - should be `YYYY-MM-DD` with an optional integer
 * @return {Boolean}
 */
function isApiVersion(version = &apos;&apos;) {
  return Boolean(String(version).match(constants.RE_API_VERSION));
}

export {
  deprecate,
  epoch,
  has,
  isEmpty,
  max,
  mixin,
  normalizeUrl,
  only,
  urlJoin,
  validEmail,
  isApiVersion
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.5)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
