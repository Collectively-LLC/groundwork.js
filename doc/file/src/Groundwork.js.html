<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/Groundwork.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/thegroundwork/groundwork.js.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Auth.js~Auth.html">Auth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Dictionary.js~Dictionary.html">Dictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Donation.js~Donation.html">Donation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Event.js~Event.html">Event</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventCategory.js~EventCategory.html">EventCategory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventInvitation.js~EventInvitation.html">EventInvitation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventMessage.js~EventMessage.html">EventMessage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventTicket.js~EventTicket.html">EventTicket</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Groundwork.js~Groundwork.html">Groundwork</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Http.js~Http.html">Http</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Payment.js~Payment.html">Payment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Profile.js~Profile.html">Profile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Quickcard.js~Quickcard.html">Quickcard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/SchemaUtils.js~SchemaUtils.html">SchemaUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Subscription.js~Subscription.html">Subscription</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Supporter.js~Supporter.html">Supporter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deprecate">deprecate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-epoch">epoch</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-has">has</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isApiVersion">isApiVersion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isEmpty">isEmpty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-max">max</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mixin">mixin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-normalizeUrl">normalizeUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-only">only</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-urlJoin">urlJoin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validEmail">validEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_CATEGORY">ENDPOINT_CATEGORY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_EVENT">ENDPOINT_EVENT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_HOST_UNSUBSCRIBE">ENDPOINT_HOST_UNSUBSCRIBE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_INVITATION">ENDPOINT_INVITATION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_MESSAGE">ENDPOINT_MESSAGE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENDPOINT_TICKET">ENDPOINT_TICKET</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NAMESPACE">NAMESPACE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-API_URL">API_URL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-API_VERSION">API_VERSION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_ACCESS_TOKEN">AUTH_ACCESS_TOKEN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_GWID">AUTH_GWID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AUTH_TOKEN_TYPE">AUTH_TOKEN_TYPE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CONFIG_AUTH">CONFIG_AUTH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DEFAULT_API_URL">DEFAULT_API_URL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FACEBOOK_APP_ID">FACEBOOK_APP_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-OAUTH_CLIENT_ID">OAUTH_CLIENT_ID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RE_API_VERSION">RE_API_VERSION</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/Groundwork.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*global __LOG__, TAG*/
/*eslint-disable no-param-reassign*/

import * as constants from &apos;./constants&apos;;
import Auth from &apos;./Auth&apos;;
import Dictionary from &apos;./Dictionary&apos;;
import Donation from &apos;./Donation&apos;;
import Event from &apos;./Event&apos;;
import Http from &apos;./Http&apos;;
import Profile from &apos;./Profile&apos;;
import Quickcard from &apos;./Quickcard&apos;;
import Subscription from &apos;./Subscription&apos;;
import Supporter from &apos;./Supporter&apos;;
import { deprecate, isApiVersion } from &apos;./utils&apos;;

/**
 * Map of resource modules to attach to Groundwork instances
 */
const RESOURCES = {
  auth: Auth,
  donations: Donation,
  events: Event,
  profiles: Profile,
  quickcards: Quickcard,
  subscriptions: Subscription,
  supporters: Supporter
};

/**
 * Default configuration for client
 */
const DEFAULTS = {
  [constants.API_URL]: constants.DEFAULT_API_URL,
  [constants.OAUTH_CLIENT_ID]: &apos;&apos;,
  [constants.FACEBOOK_APP_ID]: &apos;&apos;,
  [constants.CONFIG_AUTH]: {}
};

/**
 * Groundwork Client Library
 *
 * @desc
 * For backwards compatability apiKey is aliased to oauth_client_id within the
 * config dictionary. The clientId getter/setters remain next to the same
 * getters/setters for apiKey. This allows code written for older versions of
 * groundwork.js to continue to use oauth_client_id to configure an instance while
 * new code is encouraged to use apiKey.
 *
 * @example
 * let gw = new Groundwork({&apos;apiKey&apos;: &apos;1234&apos;});
 */
export default class Groundwork {
  /**
   * Constructor
   * @param {Object} config - client configuration
   */
  constructor(config = {}) {
    // display a deprecation warning for oauth_client_id in DEV only
    deprecate(config.oauth_client_id,
              &apos;oauth_client_id is deprecated, please use apiKey instead&apos;);

    // display a deprecation warning for api_url in DEV only
    deprecate(config.api_url,
              &apos;api_url is deprecated, please use apiUrl instead&apos;);

    // alias apiKey to OAUTH_CLIENT_ID
    if (config.apiKey) {
      config[constants.OAUTH_CLIENT_ID] = config.apiKey;
      delete config.apiKey;
    }

    // alias apiUrl to API_URL
    if (config.apiUrl) {
      config[constants.API_URL] = config.apiUrl;
      delete config.apiUrl;
    }

    /** @type {Dictionary} */
    this.config = new Dictionary(DEFAULTS);
    this.config.merge(config);

    /** @type {Http} */
    this.http = new Http(this.config);

    // Attach resource modules and pass in config
    for (const resource in RESOURCES) {
      if (RESOURCES.hasOwnProperty(resource)) {
        this[resource] = new RESOURCES[resource](this.config, this.http);
      }
    }
  }

  /**
   * Getters / Setters
   */

  /**
   * Get the version # of this build as deteremined by Webpack
   * @return {String}
   */
  get version() {
    return TAG;
  }

  /**
   * Get OAUTH_CLIENT_ID
   * @deprecated use apiKey instead
   * @return {*}
   */
  get clientId() {
    deprecate(true, &apos;clientId is deprecated, please use apiKey instead&apos;);
    return this.config.get(constants.OAUTH_CLIENT_ID);
  }

  /**
   * Mutate OAUTH_CLIENT_ID within an instance of Groundwork
   * @deprecated use apiKey instead
   * @type {String}
   */
  set clientId(id) {
    deprecate(true, &apos;clientId is deprecated, please use apiKey instead&apos;);
    this.config.set(constants.OAUTH_CLIENT_ID, id);
  }

  /**
   * Get apiKey, alias for OAUTH_CLIENT_ID
   * @return {*}
   */
  get apiKey() {
    return this.config.get(constants.OAUTH_CLIENT_ID);
  }

  /**
   * Mutate apiKey within an instance of Groundwork
   * Alias for OAUTH_CLIENT_ID
   * @type {String}
   */
  set apiKey(id) {
    this.config.set(constants.OAUTH_CLIENT_ID, id);
  }

  /**
   * Get API_URL
   * @return {*}
   */
  get apiUrl() {
    return this.config.get(constants.API_URL);
  }

  /**
   * Mutate API_URL within an instance of Groundwork
   * @type {String}
   */
  set apiUrl(url) {
    this.config.set(constants.API_URL, url);
  }

  /**
   * Get API_VERSION
   * @return {*}
   */
  get apiVersion() {
    return this.config.get(constants.API_VERSION);
  }

  /**
   * Mutate API_VERSION within an instance of Groundwork
   * @type {String}
   */
  set apiVersion(version) {
    if (!isApiVersion(version)) {
      throw new Error(`apiVersion must be formatted in either YYYY-MM-DD or with
an optinal integer like 2028-03-23:12`);
    } else {
      this.config.set(constants.API_VERSION, version);
    }
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.5)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
